import XCTest
import EquatableOpen

final class CustomOpenTests: XCTestCase {
    struct _IsEquatable: EquatableOpener {
        var yes: Bool
        init<T>(_ value: T) {
            yes = false
        }
        init<T: Equatable>(_ value: T) {
            yes = true
        }
    }
    
    func isEquatable(_ a: Any) -> Bool {
        openEquatable(a, openerType: _IsEquatable.self).yes
    }
    
    func testSmallNoEquatable() {
        XCTAssertFalse(isEquatable(SmallNoEquatable()))
    }
    
    func testBigNoEquatable() {
        XCTAssertFalse(isEquatable(BigNoEquatable()))
    }
    
    func testSmallEquatable() {
        XCTAssertTrue(isEquatable(SmallEquatable()))
    }
    
    func testBigEquatable() {
        XCTAssertTrue(isEquatable(BigEquatable()))
    }
}
